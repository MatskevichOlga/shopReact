{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link,useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import styles from'../../styles/Header.module.css';import{ROUTES}from'../../utils/routes';// import LOGO from '../../images/logo.svg';\nimport Avatar from'../../images/avatar_new.png';import{toggleForm}from\"../../features/user/userSlice\";import{useGetProductsQuery}from\"../../features/api/apiSlice\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Header=()=>{const dispatch=useDispatch();const navigate=useNavigate();const[searchValue,setSearchValue]=useState();const{currentUser,cart}=useSelector(_ref=>{let{user}=_ref;return user;});const[values,setValues]=useState({name:\"Guest\",avatar:Avatar});const{data,isLoading}=useGetProductsQuery({title:searchValue});useEffect(()=>{if(!currentUser)return;setValues(currentUser);},[currentUser]);const handleClick=()=>{if(!currentUser)dispatch(toggleForm(true));else navigate(ROUTES.PROFILE);};const handleSearch=_ref2=>{let{target:{value}}=_ref2;setSearchValue(value);};// const cartLength={cart.length}\nreturn/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.logo,children:/*#__PURE__*/_jsx(Link,{to:ROUTES.HOME,children:/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'700',color:'rgb(13,186,56)',fontSize:'17px'},children:\"SHOP\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.info,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.user,onClick:handleClick,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.avatar,style:{backgroundImage:\"url(\".concat(values.avatar,\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.username,children:values.name})]}),/*#__PURE__*/_jsxs(\"form\",{className:styles.form,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.icon,children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#search\")})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",name:\"search\",placeholder:\"Search for anything...\",autoComplete:\"off\",onChange:handleSearch,value:searchValue})}),searchValue&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:styles.box,children:isLoading?\"Loading\":!data.length?\"No results\":data.map(_ref3=>{let{title,images,id}=_ref3;return/*#__PURE__*/_jsxs(Link,{onClick:()=>setSearchValue(\"\"),className:styles.item,to:\"/products/\".concat(id),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.image,style:{backgroundImage:\"url(\".concat(images[0],\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.title,children:title})]},id);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.account,children:[/*#__PURE__*/_jsx(Link,{to:ROUTES.HOME,className:styles.favourites,children:/*#__PURE__*/_jsx(\"svg\",{className:styles['icon-fav'],children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#heart\")})})}),/*#__PURE__*/_jsxs(Link,{to:ROUTES.CART,className:styles.cart,children:[/*#__PURE__*/_jsx(\"svg\",{className:styles['icon-cart'],children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(process.env.PUBLIC_URL,\"/sprite.svg#bag\")})}),!!cart.length&&/*#__PURE__*/_jsx(\"span\",{className:styles.count,children:cart.length})]})]})]})]});};export default Header;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useDispatch","useSelector","styles","ROUTES","Avatar","toggleForm","useGetProductsQuery","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Header","dispatch","navigate","searchValue","setSearchValue","currentUser","cart","_ref","user","values","setValues","name","avatar","data","isLoading","title","handleClick","PROFILE","handleSearch","_ref2","target","value","className","header","children","logo","to","HOME","style","fontWeight","color","fontSize","info","onClick","backgroundImage","concat","username","form","icon","xlinkHref","process","env","PUBLIC_URL","input","type","placeholder","autoComplete","onChange","box","length","map","_ref3","images","id","item","image","account","favourites","CART","count"],"sources":["D:/REACT_NEW/my-pet-project/olga-pet-project-webpack/src/components/Header/Header.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styles from '../../styles/Header.module.css';\r\n\r\nimport { ROUTES } from '../../utils/routes';\r\n\r\n// import LOGO from '../../images/logo.svg';\r\nimport Avatar from '../../images/avatar_new.png';\r\n\r\nimport { toggleForm } from \"../../features/user/userSlice\";\r\nimport { useGetProductsQuery } from \"../../features/api/apiSlice\";\r\n\r\nconst Header = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const [searchValue, setSearchValue] = useState();\r\n  const { currentUser, cart } = useSelector(({ user }) => user);\r\n\r\n  const [values, setValues] = useState({ name: \"Guest\", avatar: Avatar });\r\n\r\n   const { data, isLoading } = useGetProductsQuery({ title: searchValue });\r\n   \r\n  useEffect(() => {\r\n    if (!currentUser) return;\r\n\r\n    setValues(currentUser);\r\n  }, [currentUser]);\r\n\r\n  const handleClick = () => {\r\n    if (!currentUser) dispatch(toggleForm(true));\r\n    else navigate(ROUTES.PROFILE);\r\n  };\r\n  const handleSearch = ({ target: { value } }) => {\r\n    setSearchValue(value);\r\n  };\r\n  // const cartLength={cart.length}\r\n\r\n  return (\r\n    <div className={styles.header}>\r\n      {/* лого */}\r\n      <div className={styles.logo} >\r\n        <Link to={ROUTES.HOME}>\r\n          {/* <img src={LOGO} alt=\"Stuff\" /> */}\r\n         <span style={{fontWeight: '700', color: 'rgb(13,186,56)', fontSize: '17px'}}>SHOP</span>\r\n        </Link>\r\n      </div>\r\n  {/* Пользователь */}\r\n      <div className={styles.info}>\r\n        <div className={styles.user} onClick={handleClick}>\r\n          <div className={styles.avatar} style={{backgroundImage:`url(${values.avatar})`}}/>\r\n          <div className={styles.username}>{values.name}</div>\r\n        </div>\r\n {/* Поиск */}\r\n      <form className={styles.form}>\r\n        <div className={styles.icon}>\r\n          <svg className='icon'>\r\n            <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#search`}/>\r\n          </svg>\r\n        </div>\r\n        <div className={styles.input}>\r\n          <input \r\n          type=\"search\" \r\n          name=\"search\" \r\n          placeholder=\"Search for anything...\"\r\n          autoComplete='off'\r\n          onChange={handleSearch}\r\n          value={searchValue}\r\n          />\r\n           \r\n        </div>\r\n       \r\n        {searchValue && (\r\n          <>\r\n            <div className={styles.box}>\r\n              {isLoading\r\n                ? \"Loading\"\r\n                : !data.length\r\n                ? \"No results\"\r\n                : data.map(({ title, images, id }) => {\r\n                    return (\r\n                      <Link\r\n                        key={id}\r\n                        onClick={() => setSearchValue(\"\")}\r\n                        className={styles.item}\r\n                        to={`/products/${id}`}\r\n                      >\r\n                        <div\r\n                          className={styles.image}\r\n                          style={{ backgroundImage: `url(${images[0]})` }}\r\n                        />\r\n                        <div className={styles.title}>{title}</div>\r\n                      </Link>\r\n                    );\r\n                  })}\r\n            </div>\r\n            {/* <button type='submit'><Link to={ROUTES.SEARCH}>search</Link></button>  */}\r\n            </>\r\n          )}\r\n        \r\n      </form>\r\n {/* Избранное Покупки */}\r\n      <div className={styles.account}>\r\n        <Link to={ROUTES.HOME} className={styles.favourites}>\r\n          <svg className={styles['icon-fav']}>\r\n            <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#heart`}/>\r\n          </svg>\r\n        </Link>\r\n        <Link to={ROUTES.CART} className={styles.cart}>\r\n          <svg className={styles['icon-cart']}>\r\n            <use xlinkHref={`${process.env.PUBLIC_URL}/sprite.svg#bag`}/>\r\n          </svg>\r\n          {!!cart.length && (<span className={styles.count}>{cart.length}</span>)}\r\n        </Link>\r\n      </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}